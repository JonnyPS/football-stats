(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{224:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(64),s=a.n(l),i=(a(73),a(65)),c=a(28),r=a(29),m=a(31),u=a(30),g=a(32),d=a(3),h=a(66);a(216);function p(){return o.a.createElement("h1",null,"Premier League Table 2018/19 displayed in linear graph form")}function f(e){return console.log("props",e),o.a.createElement("ul",{className:"stats-list"},o.a.createElement("li",{class:"body-copy"},o.a.createElement("span",{className:"bold-copy"},e.teamName)),o.a.createElement("br",null),o.a.createElement("li",{class:"body-copy--small"},"Number of games played: ",o.a.createElement("span",{className:"bold-copy"},e.gamesPlayed)),o.a.createElement("li",{class:"body-copy--small"},"Games won: ",o.a.createElement("span",{className:"bold-copy"},e.gamesWon)),o.a.createElement("li",{class:"body-copy--small"},"Games lost: ",o.a.createElement("span",{className:"bold-copy"},e.gamesLost)),o.a.createElement("li",{class:"body-copy--small"},"Games drawn: ",o.a.createElement("span",{className:"bold-copy"},e.gamesDrawn)),o.a.createElement("br",null),o.a.createElement("li",{class:"body-copy--small"},"Longest winning streak: ",o.a.createElement("span",{className:"bold-copy"},e.longestWinningStreak)),o.a.createElement("li",{class:"body-copy--small"},"Longest losing streak: ",o.a.createElement("span",{className:"bold-copy"},e.longestLosingStreak)))}function y(e){return o.a.createElement("div",{className:"logo-section"},o.a.createElement("ul",{className:"inline-list"},e.teams.map(function(t,a){return o.a.createElement("li",{key:a},o.a.createElement("img",{src:t.logo,alt:t.name,className:"team-logo",onClick:function(a){e.activateClickResponse(t.name),e.styleImg(a.target)}}))})),o.a.createElement("h5",null,"Click on the logos above to display them on the graph."),o.a.createElement("br",null),o.a.createElement("h5",null,"Hover over the data on the chart to display the match."))}function b(e){return o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{onClick:e.resetState},"Reset"),o.a.createElement("button",{onClick:e.removeDataset},"Remove"),o.a.createElement("button",{onClick:e.showAllDatasets},"Show All"))}var v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={allTeams:null,allMatches:null,profile:[{logo:"img/arsenal.png",name:"Arsenal",colour:"#f00005"},{logo:"img/bournemouth.png",name:"Bournemouth",colour:"#8d0104"},{logo:"img/brighton-hove.png",name:"Brighton Hove",colour:"#005daa"},{logo:"img/burnley.png",name:"Burnley",colour:"#fff515"},{logo:"img/cardiff.png",name:"Cardiff",colour:"#035da9"},{logo:"img/chelsea.png",name:"Chelsea",colour:"#024595"},{logo:"img/crystal-palace.png",name:"Crystal Palace",colour:"#b80007"},{logo:"img/everton.png",name:"Everton",colour:"#133e6c"},{logo:"img/fulham.png",name:"Fulham",colour:"#000000"},{logo:"img/huddersfield.png",name:"Huddersfield",colour:"#003d93"},{logo:"img/leicester-city.png",name:"Leicester City",colour:"#003d93"},{logo:"img/liverpool.png",name:"Liverpool",colour:"#d00623"},{logo:"img/man-city.png",name:"Man City",colour:"#5ba0da"},{logo:"img/man-united.png",name:"Man United",colour:"#da030e"},{logo:"img/newcastle.png",name:"Newcastle",colour:"#000"},{logo:"img/southampton.png",name:"Southampton",colour:"#ed1a3b"},{logo:"img/tottenham.png",name:"Tottenham",colour:"#aeaeae"},{logo:"img/watford.png",name:"Watford",colour:"#fef823"},{logo:"img/west-ham.png",name:"West Ham",colour:"#7b2c3a"},{logo:"img/wolverhampton.png",name:"Wolverhampton",colour:"#faa61a"}],teamDetails:[{teamId:"Team Id",teamName:"Team Name"}],input:"",selectedMatches:[{selectedTeam:null,homeTeam:null,awayTeam:null,winner:null,score:null,result:[null]}],teamName:null,gamesPlayed:null,gamesWon:null,gamesLost:null,gamesDrawn:null,longestWinningStreak:null,longestLosingStreak:null,matchday:[],outcomes:[],data:{labels:"",datasets:[{}]}},a.updateInput=a.updateInput.bind(Object(d.a)(Object(d.a)(a))),a.findMatches=a.findMatches.bind(Object(d.a)(Object(d.a)(a))),a.selectTeam=a.selectTeam.bind(Object(d.a)(Object(d.a)(a))),a.resetState=a.resetState.bind(Object(d.a)(Object(d.a)(a))),a.removeDataset=a.removeDataset.bind(Object(d.a)(Object(d.a)(a))),a.showAllDatasets=a.showAllDatasets.bind(Object(d.a)(Object(d.a)(a))),a.toggleImg=a.toggleImg.bind(Object(d.a)(Object(d.a)(a))),a.setOpacity=a.setOpacity.bind(Object(d.a)(Object(d.a)(a))),a.checkDatasetsForDuplicates=a.checkDatasetsForDuplicates.bind(Object(d.a)(Object(d.a)(a))),a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"saveInitialState",value:function(){console.log("save initialState"),console.log("initialState =",this.state),this.initialState=[this.state]}},{key:"resetState",value:function(){console.log("resetState"),this.setState(this.initialState[0]),this.setOpacity()}},{key:"removeDataset",value:function(){console.log("removeDataset"),this.setOpacity(this.state.data.datasets[this.state.data.datasets.length-1].label),this.setState(this.state.data.datasets.splice(-1,1))}},{key:"showAllDatasets",value:function(){var e=this;console.log("showAllDatasets"),this.state.profile.map(function(t,a){e.findMatches(t.name),e.setOpacity(void 0,!0)})}},{key:"selectTeam",value:function(e){var t=this;console.log("selectTeam name",e),this.setState({input:e.replace(/^\w/,function(e){return e.toUpperCase()})},function(){t.findMatches()})}},{key:"toggleImg",value:function(e){e.classList.contains("toggle-opacity")?e.classList.remove("toggle-opacity"):e.classList.add("toggle-opacity")}},{key:"setOpacity",value:function(e,t){var a=document.getElementsByClassName("team-logo");if(void 0!==e)for(var n=0;n<a.length;n++){a[n].getAttribute("alt")===e&&a[n].classList.remove("toggle-opacity")}else if(!0===t)for(n=0;n<a.length;n++)a[n].classList.add("toggle-opacity");else for(n=0;n<a.length;n++)a[n].classList.remove("toggle-opacity")}},{key:"checkDatasetsForDuplicates",value:function(e){var t=this.state.data.datasets.map(function(t){return t.label===e}).indexOf(!0);-1===t?this.findMatches(e):this.setState(function(e){return{data:{datasets:e.data.datasets.filter(function(e,a){return console.log("return item: ",e),console.log("return index: ",a),console.log("item[index]",e[a]),console.log("dupTeamNum",t),a!==t})}}})}},{key:"componentDidMount",value:function(){var e=this;console.log("componentDidMount - get json data");["https://api.football-data.org/v2/competitions/PL/teams?season=2018","https://api.football-data.org/v2/competitions/PL/matches?season=2018"].map(function(t){var a=new Headers;a.append("Accept","application/json"),a.append("X-Auth-Token","9d006876cd4d43f08084a828529fc968");var n=new Request(t,{method:"GET",headers:a,mode:"cors"});fetch(n).then(function(e){return e.json()}).then(function(t){console.log("json",t),null==e.state.allTeams?t.teams.map(function(a){var n=a.id,o=a.shortName;e.setState(function(e){return{allTeams:t,teamDetails:e.teamDetails.concat([{teamName:o,teamId:n}])}})}):e.setState(function(e){return{allMatches:t}}),null!==e.state.allTeams&&e.state.allMatches}).catch(function(e){console.log("parsing failed:",e)}).then(function(){e.saveInitialState()})})}},{key:"componentDidUpdate",value:function(){}},{key:"updateInput",value:function(e){var t=e.target.value;this.setState({input:t.replace(/^\w/,function(e){return e.toUpperCase()})})}},{key:"getGameStats",value:function(e,t){return e.filter(function(e){return e===t}).length}},{key:"getLongestStreak",value:function(e,t){console.log("getLongestStreak");var a=[],n=[];return e.map(function(o,l){o===t?(a.push(o),o===t&&l===e.length-1&&n.push(a.length)):(n.push(a.length),a=[])}),Math.max.apply(Math,n)}},{key:"findMatches",value:function(e){var t=this,a=!0,n=!1,o=void 0;try{for(var l,s=function(){var a=l.value;if(t.state.input===a.teamName||e===a.teamName){r=t.state.profile.filter(function(e){return e.name===a.teamName}),m=r[0].colour;var n=a.teamId,o=a.teamName,s=[],c=[],g=t.state.allMatches.matches.filter(function(e){return e.awayTeam.id===n||e.homeTeam.id===n});g.map(function(e){return c.push({home:e.homeTeam.name,away:e.awayTeam.name,score:e.score.fullTime.homeTeam+" : "+e.score.fullTime.awayTeam,winner:e.score.winner})});var d=g.map(function(e){return e.matchday});g.map(function(e,t){var a=e.score.winner,o=e.homeTeam.id;"HOME_TEAM"===a&&o===n&&s.push(3),"HOME_TEAM"===a&&o!==n&&s.push(0),"AWAY_TEAM"===a&&o===n&&s.push(0),"AWAY_TEAM"===a&&o!==n&&s.push(3),"DRAW"===a&&s.push(1)}),console.log("filteredMatches",g),u=s.reduce(function(e,t){return e.push((e[e.length-1]||0)+t),e},[]),console.log("resultsOfMatches",s);var h=t.getGameStats(s,3),p=t.getGameStats(s,1),f=t.getGameStats(s,0),y=t.getLongestStreak(s,3),b=t.getLongestStreak(s,0);console.log("winningStreak",y),console.log("losingStreak",b),t.setState(function(t){return{teamName:e,gamesPlayed:s.length,gamesWon:h,gamesDrawn:p,gamesLost:f,longestWinningStreak:y,longestLosingStreak:b,matchday:g,data:{labels:d,datasets:t.data.datasets.concat(Object(i.a)({label:o,backgroundColor:m,data:u,fixtures:c,borderColor:m},"backgroundColor","transparent"))}}})}},c=this.state.teamDetails[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var r,m,u;s()}}catch(g){n=!0,o=g}finally{try{a||null==c.return||c.return()}finally{if(n)throw o}}}},{key:"render",value:function(e,t){return o.a.createElement("div",null,o.a.createElement(p,null),o.a.createElement(y,{teams:this.state.profile,activateClickResponse:this.checkDatasetsForDuplicates,styleImg:this.toggleImg}),o.a.createElement(f,{teamName:this.state.teamName,gamesPlayed:this.state.gamesPlayed,gamesWon:this.state.gamesWon,gamesLost:this.state.gamesLost,gamesDrawn:this.state.gamesDrawn,longestWinningStreak:this.state.longestWinningStreak,longestLosingStreak:this.state.longestLosingStreak}),o.a.createElement(h.a,{data:this.state.data,height:200,width:400,options:{animation:{duration:0},tooltips:{callbacks:{title:function(e,t){var a=e[0].datasetIndex,n=e[0].index,o=(t.datasets[a].label,t.datasets[a].fixtures[n]);return o.home+" v "+o.away},afterTitle:function(e,t){var a=e[0].datasetIndex,n=e[0].index;t.datasets[a].label;return t.datasets[a].fixtures[n].score}},label:null},legend:{display:!1},scales:{yAxes:[{ticks:{max:3*this.state.matchday.length,min:0,stepSize:6},scaleLabel:{display:!0,labelString:"Points available"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Matchday"}}]},title:{text:""}}}),o.a.createElement(b,{resetState:this.resetState,removeDataset:this.removeDataset,showAllDatasets:this.showAllDatasets}))}}]),t}(n.Component);function k(e){return o.a.createElement("ul",null,e.items.map(function(e){return o.a.createElement("li",{key:e},e)}))}n.Component,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(v,null),document.getElementById("inputBox")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a(224)},73:function(e,t,a){}},[[68,2,1]]]);
//# sourceMappingURL=main.690c3289.chunk.js.map