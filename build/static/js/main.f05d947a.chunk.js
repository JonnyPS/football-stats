(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{224:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),l=t(64),s=t.n(l),i=(t(73),t(65)),c=t(28),r=t(29),m=t(31),u=t(30),h=t(32),d=t(3),g=t(66);t(216);function p(e){return o.a.createElement("ul",{className:"stats-list"},o.a.createElement("li",null,"Number of games played: ",o.a.createElement("span",{className:"bold-copy"},e.gamesPlayed)),o.a.createElement("li",null,"Games won: ",o.a.createElement("span",{className:"bold-copy"},e.gamesWon)),o.a.createElement("li",null,"Games lost: ",o.a.createElement("span",{className:"bold-copy"},e.gamesLost)),o.a.createElement("li",null,"Games drawn: ",o.a.createElement("span",{className:"bold-copy"},e.gamesDrawn)))}function f(e){return o.a.createElement("ul",{className:"inline-list"},e.teams.map(function(a,t){return o.a.createElement("li",{key:t},o.a.createElement("img",{src:a.logo,alt:a.name,onClick:function(){return e.activateClickResponse(a.name)}}))}))}var b=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(m.a)(this,Object(u.a)(a).call(this,e))).state={allTeams:null,allMatches:null,profile:[{logo:"img/arsenal.png",name:"Arsenal",colour:"#f00005"},{logo:"img/bournemouth.png",name:"Bournemouth",colour:"#8d0104"},{logo:"img/brighton-hove.png",name:"Brighton Hove",colour:"#005daa"},{logo:"img/burnley.png",name:"Burnley",colour:"#fff515"},{logo:"img/cardiff.png",name:"Cardiff",colour:"#035da9"},{logo:"img/chelsea.png",name:"Chelsea",colour:"#024595"},{logo:"img/crystal-palace.png",name:"Crystal Palace",colour:"#b80007"},{logo:"img/everton.png",name:"Everton",colour:"#133e6c"},{logo:"img/Fulham.png",name:"Fulham",colour:"#000000"},{logo:"img/huddersfield.png",name:"Huddersfield",colour:"#003d93"},{logo:"img/leicester-city.png",name:"Leicester City",colour:"#003d93"},{logo:"img/liverpool.png",name:"Liverpool",colour:"#d00623"},{logo:"img/man-city.png",name:"Man City",colour:"#5ba0da"},{logo:"img/man-united.png",name:"Man United",colour:"#da030e"},{logo:"img/newcastle.png",name:"Newcastle",colour:"#000"},{logo:"img/southampton.png",name:"Southampton",colour:"#ed1a3b"},{logo:"img/tottenham.png",name:"Tottenham",colour:"#aeaeae"},{logo:"img/watford.png",name:"Watford",colour:"#fef823"},{logo:"img/west-ham.png",name:"West Ham",colour:"#7b2c3a"},{logo:"img/wolverhampton.png",name:"Wolverhampton",colour:"#faa61a"}],teamDetails:[{teamId:"Team Id",teamName:"Team Name"}],input:"",selectedMatches:[{selectedTeam:null,homeTeam:null,awayTeam:null,winner:null,score:null,result:[null]}],gamesPlayed:null,gamesWon:null,gamesLost:null,gamesDrawn:null,matchday:[],outcomes:[],data:{labels:"",datasets:[{}]}},t.updateInput=t.updateInput.bind(Object(d.a)(Object(d.a)(t))),t.findMatches=t.findMatches.bind(Object(d.a)(Object(d.a)(t))),t.selectTeam=t.selectTeam.bind(Object(d.a)(Object(d.a)(t))),t.resetState=t.resetState.bind(Object(d.a)(Object(d.a)(t))),t.removeDataset=t.removeDataset.bind(Object(d.a)(Object(d.a)(t))),t.showAllDatasets=t.showAllDatasets.bind(Object(d.a)(Object(d.a)(t))),t.showHomeGames=t.showHomeGames.bind(Object(d.a)(Object(d.a)(t))),t.showAwayGames=t.showAwayGames.bind(Object(d.a)(Object(d.a)(t))),t}return Object(h.a)(a,e),Object(r.a)(a,[{key:"saveInitialState",value:function(){console.log("save initialState"),this.initialState=[this.state]}},{key:"resetState",value:function(){console.log("resetState"),this.setState(this.initialState[0])}},{key:"removeDataset",value:function(){console.log("removeDataset"),this.setState(this.state.data.datasets.splice(-1,1))}},{key:"showAllDatasets",value:function(){var e=this;console.log("showAllDatasets"),this.state.profile.map(function(a,t){console.log("item.name",a.name),console.log("index",t),e.findMatches(a.name),console.log("this.findMatches",e.findMatches)})}},{key:"showHomeGames",value:function(){console.log("showHomeGames");var e=[],a=[];this.state.data.datasets.map(function(t,n){if(console.log("datasets",t),void 0!==t.label){console.log("item.label",t.label);t.fixtures.filter(function(a,n){console.log("games",a),a.home.includes(t.label)&&e.push(a)})}console.log("homeGamesList",e),e.map(function(e){return"HOME_TEAM"===e.winner?a.push(3):"AWAY_TEAM"===e.winner?a.push(0):a.push(1)}),console.log("homeResultsOfMatches",a)});var t=a.reduce(function(e,a){return e.push((e[e.length-1]||0)+a),e},[]);console.log("homePointsSoFar",t),this.setState(function(e){return{data:{datasets:e.data.datasets.concat({data:t})}}})}},{key:"showAwayGames",value:function(){console.log("showawayGames");var e=[],a=[];this.state.data.datasets.map(function(t,n){if(console.log("datasets",t),void 0!==t.label){console.log("item.label",t.label);t.fixtures.filter(function(a,n){console.log("games",a),a.away.includes(t.label)&&e.push(a)})}console.log("awayGamesList",e),e.map(function(e){return"AWAY_TEAM"===e.winner?a.push(3):"AWAY_TEAM"===e.winner?a.push(0):a.push(1)}),console.log("awayResultsOfMatches",a)});var t=a.reduce(function(e,a){return e.push((e[e.length-1]||0)+a),e},[]);console.log("awayPointsSoFar",t),this.setState(function(e){return{data:{datasets:e.data.datasets.concat({data:t})}}})}},{key:"selectTeam",value:function(e){var a=this;console.log("selectTeam name",e),console.log("state",this.state),this.setState({input:e.replace(/^\w/,function(e){return e.toUpperCase()})},function(){a.findMatches()})}},{key:"componentDidMount",value:function(){var e=this;console.log("componentDidMount - get json data"),this.saveInitialState();["https://api.football-data.org/v2/competitions/PL/teams?season=2018","https://api.football-data.org/v2/competitions/PL/matches?season=2018"].map(function(a){var t=new Headers;t.append("Accept","application/json"),t.append("X-Auth-Token","9d006876cd4d43f08084a828529fc968");var n=new Request(a,{method:"GET",headers:t,mode:"cors"});fetch(n).then(function(e){return e.json()}).then(function(a){null==e.state.allTeams?a.teams.map(function(t){var n=t.id,o=t.shortName;e.setState(function(e){return{allTeams:a,teamDetails:e.teamDetails.concat([{teamName:o,teamId:n}])}})}):e.setState(function(e){return{allMatches:a}}),null!==e.state.allTeams&&e.state.allMatches}).catch(function(e){console.log("parsing failed:",e)}).then(function(){e.saveInitialState()})})}},{key:"componentDidUpdate",value:function(){console.log("state on update",this.state)}},{key:"updateInput",value:function(e){var a=e.target.value;this.setState({input:a.replace(/^\w/,function(e){return e.toUpperCase()})})}},{key:"findMatches",value:function(e){var a=this;console.log("name",e);var t=!0,n=!1,o=void 0;try{for(var l,s=function(){var t=l.value;if(a.state.input===t.teamName||e===t.teamName){r=a.state.profile.filter(function(e){return e.name===t.teamName}),m=r[0].colour;var n=t.teamId,o=t.teamName,s=[],c=[],h=a.state.allMatches.matches.filter(function(e){return e.awayTeam.id===n||e.homeTeam.id===n});console.log("filteredMatches",h),h.map(function(e){return c.push({home:e.homeTeam.name,away:e.awayTeam.name,score:e.score.fullTime.homeTeam+" : "+e.score.fullTime.awayTeam,winner:e.score.winner})}),console.log("fixtures ",c);var d=h.map(function(e){return e.matchday});h.map(function(e,a){var t=e.score.winner,o=e.homeTeam.id;"HOME_TEAM"===t&&o===n&&s.push(3),"HOME_TEAM"===t&&o!==n&&s.push(0),"AWAY_TEAM"===t&&o===n&&s.push(0),"AWAY_TEAM"===t&&o!==n&&s.push(3),"DRAW"===t&&s.push(1)}),u=s.reduce(function(e,a){return e.push((e[e.length-1]||0)+a),e},[]),a.setState(function(e){return{gamesPlayed:s.length,matchday:h,data:{labels:d,datasets:e.data.datasets.concat(Object(i.a)({label:o,backgroundColor:m,data:u,fixtures:c,borderColor:m},"backgroundColor","transparent"))}}})}},c=this.state.teamDetails[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var r,m,u;s()}}catch(h){n=!0,o=h}finally{try{t||null==c.return||c.return()}finally{if(n)throw o}}}},{key:"render",value:function(e,a){return o.a.createElement("div",null,o.a.createElement("input",{type:"text",placeholder:"Find your team...",value:this.state.input,onChange:this.updateInput}),o.a.createElement("button",{onClick:this.findMatches},"Submit"),o.a.createElement(f,{teams:this.state.profile,activateClickResponse:this.selectTeam}),o.a.createElement(p,{gamesPlayed:this.state.gamesPlayed,gamesWon:this.state.gamesWon,gamesLost:this.state.gamesLost,gamesDrawn:this.state.gamesDrawn}),o.a.createElement(g.a,{data:this.state.data,height:200,width:400,options:{animation:{duration:0},tooltips:{callbacks:{title:function(e,a){var t=e[0].datasetIndex,n=e[0].index,o=(a.datasets[t].label,a.datasets[t].fixtures[n]);return o.home+" v "+o.away},afterTitle:function(e,a){var t=e[0].datasetIndex,n=e[0].index;a.datasets[t].label;return a.datasets[t].fixtures[n].score}}},legend:{display:!0},scales:{yAxes:[{ticks:{max:3*this.state.matchday.length,min:0,stepSize:3},scaleLabel:{display:!0,labelString:"Points available"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Matchday"}}]},title:{display:"hello",text:"Premier League Teams"}}}),o.a.createElement("button",{onClick:this.resetState},"Reset"),o.a.createElement("button",{onClick:this.removeDataset},"Remove"),o.a.createElement("button",{onClick:this.showAllDatasets},"Show all"),o.a.createElement("button",{onClick:this.showHomeGames},"Show only home games"),o.a.createElement("button",{onClick:this.showAwayGames},"Show only away games"))}}]),a}(n.Component);function v(e){return o.a.createElement("ul",null,e.items.map(function(e){return o.a.createElement("li",{key:e},e)}))}n.Component,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(b,null),document.getElementById("inputBox")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,a,t){e.exports=t(224)},73:function(e,a,t){}},[[68,2,1]]]);
//# sourceMappingURL=main.f05d947a.chunk.js.map